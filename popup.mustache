<!-- Main templates-->
<script id="popup" type="x-tmpl-mustache">
  <div id="mpe-{{type}}-{{id}}" class="mpe">
  {{> header}}
  {{#choices}}
    <div class="mpe-content">
      <div class="{{itemClass}}">
        {{> diff }}
      </div>
      {{> unchanged }}
    </div>
  {{/choices}}
  {{#result}}{{> result}}{{/result}}
  {{^result}}{{> comment}}{{> footer}}{{/result}}
  {{> err}}
  </div>
</script>

<script id="multipopup" type="x-tmpl-mustache">
  <div id="mpe-{{type}}-{{id}}" class="mpe">
  {{> header}}
  <div class="mpe-content-multi">
    {{#choices}}
      <div class="mpe-content-item {{itemClass}}">
        {{#result}}
          <div class="mpe-group-label">{{label}}</div>
        {{/result}}{{^result}}
          <div class="mpe-low-zoom mpe-group-label">{{label}}</div>
          <div class="mpe-buttons">
            {{> button}}
          </div>
        {{/result}}
        {{> diff }}
        {{> unchanged }}
      </div>
    {{/choices}}
    {{#common}}{{> unchanged }}{{/common}}
  </div>
  {{#result}}{{> result}}{{/result}}
  {{^result}}
    {{> comment }}
    {{> multifooter}}
  {{/result}}
  {{> err}}
  </div>
</script>

<script id="wait" type="x-tmpl-mustache">
  <div id="mpe-{{type}}-{{id}}">
    {{> header }}
    <div class='mpe-wait' title='downloading'/>
  </div>
</script>

<script id="error" type="x-tmpl-mustache">
  <div id="mpe-{{type}}-{{id}}">
    {{> header }}{{> err }}
  </div>
</script>

<!-- Partials -->

<script id="header" type="x-tmpl-mustache">
  <div class="mpe-header">
    <a title="View this object at OpenStreetMap" class="mpe-id" target="_blank" href="{{{mainWebsite}}}/{{type}}/{{id}}">{{type}} {{id}}</a>
    {{#version}}<span class="mpe-ver">v{{version}}</span>{{/version}}
    <div class="mpe-help" title="Show Help page" class="help">
      <a target="popup_help" href='{{url_help}}'>&nbsp;&#63;&nbsp;</a>
    </div>
    <div class="mpe-links">
      <a target="_blank" href="http://level0.osmz.ru/?url={{type}}/{{id}}" title="Use Level0 to edit this feature.">level0</a>
    </div>
  </div>
</script>

<script id="diff" type="x-tmpl-mustache">
  <div class="mpe-diff">
    {{#add}}
      <div class="add" title='Add a new tag "{{k}}"'>
       ➕ {{>tag}} = {{>vlink}}
      </div>
    {{/add}}
    {{#mod}}
      <div class="mod" title='Modify "{{k}}" tag'>
       ✎ {{>tag}} = {{>oldvlink}} ➡ {{>vlink}}
      </div>
    {{/mod}}
    {{#del}}
      <div class="del" title='Delete "{{k}}" tag'>
       ➖ {{>tag}} = {{>oldvlink}}
      </div>
    {{/del}}
  </div>
</script>

<script id="unchanged" type="x-tmpl-mustache">
  {{#unchanged}}
    <div class="mpe-tags" title="Tags with no changes">
      {{>tag}} = {{>vlink}}
    </div>
  {{/unchanged}}
</script>

<script id="button" type="x-tmpl-mustache">
<button class="mpe-{{btnClass}}-btn" data-type="{{btnClass}}" data-group="{{groupId}}" title="{{title}}{{#conflict}}

{{conflict}}{{/conflict}}{{#agreed}}

{{agreed}}{{/agreed}}"><span class="mpe-{{btnClass}}-status">{{icon}}</span>{{btnLabel}}{{#conflict}}<span class="mpe-conflict-status">*</span>{{/conflict}}</button>
</script>

<script id="footer" type="x-tmpl-mustache">
  <div class="mpe-footer">
    {{> lowZoomError }}
    <div class="mpe-buttons">
      {{#choices}}
        {{> button}}
      {{/choices}}
      {{#no}}
        {{> button}}
      {{/no}}
    </div>
  </div>
</script>

<script id="multifooter" type="x-tmpl-mustache">
  <div class="mpe-footer">
    {{> lowZoomError }}
    <div class="mpe-buttons">
      {{#no}}
        {{> button}}
      {{/no}}
    </div>
  </div>
</script>

<script id="err" type="x-tmpl-mustache">
  <div class="mpe-error mpe-action-error" title="Error">{{error}}</div>
</script>

<script id="tag" type="x-tmpl-mustache">
  <span class="tag">{{k}}</span>
</script>

<script id="vlink" type="x-tmpl-mustache">
  {{#vlink}}<a href="{{vlink}}" target="popup_tag2link">{{/vlink}}
    <span class="value">{{v}}</span>
  {{#vlink}}</a>{{/vlink}}
</script>

<script id="oldvlink" type="x-tmpl-mustache">
  {{#oldvlink}}<a href="{{oldvlink}}" target="popup_tag2link">{{/oldvlink}}
    <span class="oldvalue">{{oldv}}</span>
  {{#oldvlink}}</a>{{/oldvlink}}
</script>

<script id="comment" type="x-tmpl-mustache">
  <div class="mpe-comment" title="Comment for this change">
    {{comment}}
  </div>
</script>

<script id="lowZoomError" type="x-tmpl-mustache">
  <div class="mpe-low-zoom mpe-error">
    Editing from space is hard.<br>
    Zoom in to Edit.
  </div>
</script>

<script id="result" type="x-tmpl-mustache">
  {{#result}}
    <div class="mpe-status" title="{{title}}">
      <span class="mpe-{{btnClass}}-status">{{icon}}</span>{{resultText}}
      {{#user}}
        <a target="_blank" href="{{{mainWebsite}}}/user/{{{user}}}">{{{user}}}</a>
      {{/user}}
      {{#changesetId}}
        <a href="{{{mainWebsite}}}/changeset/{{changesetId}}">#{{changesetId}}</a>
      {{/changesetId}}
    </div>
  {{/result}}
</script>

<!-- Unfinished, needs a full rewrite !!! -->
<script id="toolbar" type="x-tmpl-mustache">
<div id="mpe-toolbar" class="header-toolbar" style="width:200px; height:200px;position:fixed;">
  <nav class="navbar navbar-default result">
    <ul class="nav navbar-nav navbar-left">
      <li><a id="display-button" href="#" data-toggle="dropdown" class="dropdown-toggle" data-placement="top" data-i18n="[title]wdqs-app-button-display-title">
      <span id="display-button-icon" class="glyphicon glyphicon-eye-open" aria-hidden="true"></span><span id="display-button-label"></span>
      <span class="caret"></span>
      </a>
        <ul id="result-browser-menu" class="dropdown-menu" role="menu">
        </ul></li>
      <li>
      <li>
        <a target="_blank" class="help" rel="noopener" href="https://www.wikidata.org/wiki/Wikidata:SPARQL_query_service/Wikidata_Query_Help/Result_Views">
        <span class="fa fa-question-circle"></span></a>
      </li>
    </ul>
    <ul class="nav navbar-nav navbar-right">
      <li class="navbar-text">
        <span class="query-total">
        <span class="label label-default"><span id="total-results"></span> Results in <span id="query-time"></span> ms </span></span> &nbsp;
      </li>
    </ul>
  </nav>
</div>
</script>
